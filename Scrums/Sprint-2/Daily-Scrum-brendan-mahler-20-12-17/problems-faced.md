Working out bugs and null errors